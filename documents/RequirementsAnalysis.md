## 书店系统 需求分析

### 一、用户系统

#### （一）业务流程：

​	1.储存所有与“用户”相关的信息（用户名，密码，权限，ID信息）。

​	2.处理与账户管理相关的操作（创建用户，修改密码，登录验证，可能的用户信息查询）。

#### （二）数据流：

​	1.从命令执行系统处获取与用户相关的修改、查询操作，并对文件进行相应的更改/返回查询信息。

​	2.将用户操作的操作信息传递给日志系统，用于生成日志的用户管理部分。

​	Rmk:只是一个类似封装好的静态“用户数据库”，但并不维护动态的登录栈信息/书本选择等操作。



### 二、书本系统

#### （一）业务流程

​	1.储存所有与“书本”相关的信息（名称，ISBN，作者，关键字，库存，单价）。

​	2.处理与书本管理相关的操作（修改书本信息，根据key查询符合条件的书本，进货/售卖）。

#### （二）数据流

​	1.从命令执行系统处获取与书本相关的修改、查询操作，并对文件进行相应的更改/输出查询信息。

​	2.将书本操作的操作信息传递给日志系统，用于生成日志的书本管理部分和财务的进出账部分。

​	Rmk:一个封装好的“书本数据库”。



### 三、日志系统

#### （一）业务流程

​	1.储存、整理所有的财务进出账信息，并在需要时输出。

​	2.生成操作日志。

####  （二）数据流

​	1.从命令执行系统处获取每个操作的用户，从用户/书本系统处获取操作的具体信息，并将日志信息储存至文件；

​	2.从书本系统处获得财务的进出账信息，在需要时将财务信息直接输出至标准IO（or 可能的Web）。



### 四、输入验证系统

#### （一）业务流程

​	1.对所有的输入信息合法性进行验证。

​	2.对输入信息的某些关键字（如书本查询的附加参数）进行提取。

#### （二）数据流

​	1.从命令执行系统处获取命令详情，将输入的合法性信息返回给命令执行系统。

​	2.将输入信息的关键字提取并返回给命令执行系统。

​	Rmk:命令执行系统的一个子系统，仅负责指令格式的合法性（而非指令内容的合法性和指令的运行）。由于合法性验证复杂故而独立。



### 五、命令执行系统

#### （一）业务流程

​	1.接受操作信息，并统合上述四个系统进行执行。

​	2.管理登录栈和选择书本等动态的用户信息。

#### （二）数据流

​	1.从标准IO中获取操作信息。

​	2.向输入验证系统传递给输入验证系统，并获取操作合法性。

​	3.向日志系统提供操作的用户信息。

​	4.向用户/书本系统提供具体的对应操作信息，并获取可能的查询信息。

​	Rmk:总的运行系统，负责管理动态信息与任务分配。